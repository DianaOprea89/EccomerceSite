{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport ProductDetailPage from '@/views/ProductDetailPage';\nimport CartPage from '@/views/CartPage';\nimport ProductsPage from '@/views/ProductsPage';\nimport NotFoundPage from '@/views/NotFoundPage';\nimport loginPage from \"@/views/LoginPage\";\nimport registerPage from \"@/views/RegisterPage\";\nVue.use(VueRouter);\nconst routes = [{\n  path: '/products',\n  name: 'Products',\n  component: ProductsPage\n}, {\n  path: '/users/:userId/cart',\n  name: 'CartPage',\n  component: CartPage,\n  props: true\n}, {\n  path: '/products/:productId',\n  name: 'ProductDetail',\n  component: ProductDetailPage,\n  props: true //\n}, {\n  path: '/',\n  redirect: '/products',\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '*',\n  name: 'NotFoundPage',\n  component: NotFoundPage\n}, {\n  path: '/login',\n  name: 'Login',\n  component: loginPage\n}, {\n  path: '/register',\n  name: \"Register\",\n  component: registerPage,\n  meta: {\n    requiresGuest: true\n  }\n}];\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const loggedInUser = JSON.parse(localStorage.getItem('user'));\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!loggedInUser) {\n      next('/login');\n    } else {\n      next();\n    }\n  } else {\n    next();\n  }\n  if (loggedInUser && to.path === '/') {\n    next(`/products/${loggedInUser.id}`);\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","ProductDetailPage","CartPage","ProductsPage","NotFoundPage","loginPage","registerPage","use","routes","path","name","component","props","redirect","meta","requiresAuth","requiresGuest","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","loggedInUser","JSON","parse","localStorage","getItem","matched","some","record","id"],"sources":["D:/laragon/www/Node exercises/repos/fsv-front-end/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport ProductDetailPage from '@/views/ProductDetailPage';\nimport CartPage from '@/views/CartPage';\nimport ProductsPage from '@/views/ProductsPage';\nimport NotFoundPage from '@/views/NotFoundPage';\nimport loginPage from \"@/views/LoginPage\";\nimport registerPage from \"@/views/RegisterPage\";\n\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path:'/products',\n    name : 'Products',\n    component: ProductsPage\n  },\n  {\n    path: '/users/:userId/cart',\n    name: 'CartPage',\n    component: CartPage,\n    props: true\n  }\n  ,\n  {\n    path: '/products/:productId',\n    name: 'ProductDetail',\n    component: ProductDetailPage,\n    props: true //\n  }\n  ,\n  {\n    path:'/',\n    redirect:'/products',\n    meta: { requiresAuth: true }\n  },\n  {\n    path:'*',\n    name: 'NotFoundPage',\n    component: NotFoundPage\n  },\n  {\n    path:'/login',\n    name : 'Login',\n    component: loginPage\n  },\n\n  {\n    path: '/register',\n    name: \"Register\",\n    component: registerPage,\n    meta: { requiresGuest: true }\n  }\n\n\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\n\nrouter.beforeEach((to, from, next) => {\n  const loggedInUser = JSON.parse(localStorage.getItem('user'));\n\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!loggedInUser) {\n      next('/login');\n    } else {\n      next();\n    }\n  } else {\n    next();\n  }\n\n  if (loggedInUser && to.path === '/') {\n    next(`/products/${loggedInUser.id}`);\n  }\n});\n\n\nexport default router\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,iBAAiB,MAAM,2BAA2B;AACzD,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,YAAY,MAAM,sBAAsB;AAC/C,OAAOC,YAAY,MAAM,sBAAsB;AAC/C,OAAOC,SAAS,MAAM,mBAAmB;AACzC,OAAOC,YAAY,MAAM,sBAAsB;AAG/CP,GAAG,CAACQ,GAAG,CAACP,SAAS,CAAC;AAElB,MAAMQ,MAAM,GAAG,CACb;EACEC,IAAI,EAAC,WAAW;EAChBC,IAAI,EAAG,UAAU;EACjBC,SAAS,EAAER;AACb,CAAC,EACD;EACEM,IAAI,EAAE,qBAAqB;EAC3BC,IAAI,EAAE,UAAU;EAChBC,SAAS,EAAET,QAAQ;EACnBU,KAAK,EAAE;AACT,CAAC,EAED;EACEH,IAAI,EAAE,sBAAsB;EAC5BC,IAAI,EAAE,eAAe;EACrBC,SAAS,EAAEV,iBAAiB;EAC5BW,KAAK,EAAE,IAAI,CAAC;AACd,CAAC,EAED;EACEH,IAAI,EAAC,GAAG;EACRI,QAAQ,EAAC,WAAW;EACpBC,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK;AAC7B,CAAC,EACD;EACEN,IAAI,EAAC,GAAG;EACRC,IAAI,EAAE,cAAc;EACpBC,SAAS,EAAEP;AACb,CAAC,EACD;EACEK,IAAI,EAAC,QAAQ;EACbC,IAAI,EAAG,OAAO;EACdC,SAAS,EAAEN;AACb,CAAC,EAED;EACEI,IAAI,EAAE,WAAW;EACjBC,IAAI,EAAE,UAAU;EAChBC,SAAS,EAAEL,YAAY;EACvBQ,IAAI,EAAE;IAAEE,aAAa,EAAE;EAAK;AAC9B,CAAC,CAGF;AAED,MAAMC,MAAM,GAAG,IAAIjB,SAAS,CAAC;EAC3BkB,IAAI,EAAE,SAAS;EACfC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ;EAC1Bd;AACF,CAAC,CAAC;AAEFS,MAAM,CAACM,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,YAAY,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EAE7D,IAAIP,EAAE,CAACQ,OAAO,CAACC,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACpB,IAAI,CAACC,YAAY,CAAC,EAAE;IACvD,IAAI,CAACY,YAAY,EAAE;MACjBD,IAAI,CAAC,QAAQ,CAAC;IAChB,CAAC,MAAM;MACLA,IAAI,CAAC,CAAC;IACR;EACF,CAAC,MAAM;IACLA,IAAI,CAAC,CAAC;EACR;EAEA,IAAIC,YAAY,IAAIH,EAAE,CAACf,IAAI,KAAK,GAAG,EAAE;IACnCiB,IAAI,CAAE,aAAYC,YAAY,CAACQ,EAAG,EAAC,CAAC;EACtC;AACF,CAAC,CAAC;AAGF,eAAelB,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}